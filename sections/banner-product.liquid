
{{'banner-product.css' | asset_url | stylesheet_tag }}
<div class="banner-product  product-card-wrapper">
    <div class="banner-product__content">
      {% assign mobile_carousel = section.settings.mobile_carousel%}
            {% for block in section.blocks %}
             {% if block.type == "image_with_text_overlay" %}
              {% liquid 
                assign id = block.id
                assign color = block.settings.color
                assign eyebrow = block.settings.eyebrow
                assign heading = block.settings.heading
                assign subheading = block.settings.subheading
                assign cta_text = block.settings.cta_text
                assign cta_url = block.settings.cta_url
                assign is_slider = block.settings.is_carousel_content
                assign image_desktop = block.settings.image_desktop
                assign image_mobile = block.settings.image_mobile
                assign inline_heading = block.settings.inline_heading
                assign button_type = 'outline'
                assign button_background_type = 'transparent'
              %}  
                  {% render 'image-with-text-overlay', 
                    wrapper_class: "sidebar-banner-content"
                    id: id,
                    color: color,
                    eyebrow: eyebrow,
                    heading: heading, 
                    subheading: subheading, 
                    cta_text: cta_text, 
                    cta_url: cta_url, 
                    image_desktop: image_desktop,
                    image_mobile: image_mobile,
                    text_wrapper_class: 'sidebar-banner',
                    inline_heading: inline_heading,
                    mobile_aspect_ratio: 1.16
                    desktop_aspect_ratio: 1.15
                    desktop_crop: true
                    mobile_crop: true,
                    button_type: button_type,
                    button_background_type: button_background_type
                    %}

                {% endif %}

                {% if block.type == "featured_products" %} 
                <div class="banner-product__products-wrapper">
                    {% assign collection = block.settings.collection %}
                      <div class="banner-product__products-content banner-product__products-content--desktop {% if mobile_carousel %}banner-product__products-content--show-mobile{% endif %}"> 
                      <custom-carousel>
                        <div class="custom-carousel__content hide" data-carousel-content>
                        {% for product in collection.products %} 
                        {% if product.available %}  
                        <div class="swiper-slide">
                         {% render 'custom-product-card',
                          product:product
                         %}
                        </div>
                      {% endif %}
                        {% endfor %}
                      </div>
                        <script type="text/json" data-settings>
                            {
                              "slidesPerView": 2,
                              "spaceBetween": 10,
                              "progressPagination": true,
                              "overflowNagivation": true,
                              "pagination": true,
                              "breakpoints": {
                               "768": {
                                "pagination": false,
                                "navigation": true,
                                "slidesPerView": 2.1,
                                "spaceBetween": 20
                               },
                               "1200": {
                                  "pagination": false,
                                  "navigation": true,
                                  "slidesPerView": 3,
                                  "spaceBetween": 27
                                }
                              }
                            }
                          </script>
                    </custom-carousel>
                      </div>
                      <div class="banner-product__products-content  banner-product__products-content--mobile {% if mobile_carousel %}banner-product__products-content--hide{% endif %}">
                        {% for product in collection.products limit: 4 %} 
                        {% if product.available %}  
                          {% render 'custom-product-card', product: product %}
                      {% endif %}
                        {% endfor %}
                      </div>
              </div>
                {% endif %}
              {% endfor %}
    


  
    </div>
  </div>

{% schema %}
 {
   "name": "banner-product",
   "settings": [
    {
      "type": "checkbox",
      "id": "mobile_carousel",
      "label": "Carousel in mobile ?",
      "default": true
    }
   ],
   "blocks": [
    {
     "type": "image_with_text_overlay",
     "name": "Image with text overlay",
     "settings": [
      {
        "type": "header",
        "content": "Block Group"
      },
      {
        "type": "checkbox",
        "id": "is_carousel_content",
        "label": "Is Carousel Content ?",
        "default": false
      },

      {
        "type": "header",
        "content": "Block Contents"
      },
        {
          "type": "checkbox",
          "id": "show_logo",
          "label": "Show Logo ?",
          "default": false
        },
        {
            "type": "color",
            "id": "text_color",
            "label": "Text color"
        },
        {
          "type": "image_picker",
          "id": "image_desktop",
          "label": "Image"
        },
        {
          "type": "image_picker",
          "id": "image_mobile",
          "label": "Image"
        },
        {
          "type": "text",
          "id": "eyebrow",
          "label": "Eyebrow"
        },
        {
          "type": "text",
          "id":  "heading",
          "label": "Heading"
        },
        {
          "type": "checkbox",
          "id":  "inline_heading",
          "label": "Inline Heading ?",
          "default": false
        },
        {
          "type": "text",
          "id":  "subheading",
          "label": "Subheading"
        },
        {
          "type": "text",
          "id":  "cta_text",
          "label": "CTA Text"
        },
        {
          "type": "url",
          "id":  "cta_url",
          "label": "CTA url"
        }
     ]
    },
    {
      "type": "featured_products",
      "name": "Products",
      "settings": [
        {
          "type": "collection",
          "id": "collection",
          "label": "Collection"
        }
       ]
    }
   ],
   "presets": [
    {
      "name": "banner-product"
    }
   ]
 }

{% endschema %}